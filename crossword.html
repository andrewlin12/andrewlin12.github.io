<html>

<head>
  <script src="https://ohyay.co/js/api.js"></script>
</head>

<body style="background-color: white">
  <script>
    ohyay.registerMessageHandler(async s => {
      const roomId = await ohyay.getCurrentRoomId()
      const elements = await ohyay.getRoomElements(roomId, 'crossword_letter');
      let correct = true;
      elements.forEach(e => {
        correct = correct && e.title === e.text;
        console.log(e.title, e.text, correct);
      });
      
      const congrats = await ohyay.getRoomElements(roomId, 'crossword_congrats');
      console.log('Congrats element', congrats[0]);
      ohyay.updateElement(congrats[0].id, {
        visible: correct
      })
    });

    document.body.append('Hello!', new Date().toLocaleTimeString());
  </script>
</body>

</html>
